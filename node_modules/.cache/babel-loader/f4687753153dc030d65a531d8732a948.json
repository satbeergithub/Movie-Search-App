{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Satbeer/Desktop/Movie Search App/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/Satbeer/Desktop/Movie Search App/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/Satbeer/Desktop/Movie Search App/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Satbeer/Desktop/Movie Search App/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./MovieList.css\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieList=function MovieList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPage=_useState10[0],setCurrentPage=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),hasMore=_useState12[0],setHasMore=_useState12[1];var fetchMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return axios.get(\"https://www.omdbapi.com/?s=star wars&page=\".concat(currentPage,\"&apikey=8a7484af\"));case 4:response=_context.sent;setMovies(function(prevMovies){return[].concat(_toConsumableArray(prevMovies),_toConsumableArray(response.data.Search));});setHasMore(response.data.Search.length>0);console.log(response.data.Search);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);case 13:setLoading(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function fetchMovies(){return _ref.apply(this,arguments);};}();var handleLoadMore=function handleLoadMore(){setCurrentPage(function(prevPage){return prevPage+1;});};useEffect(function(){fetchMovies();},[currentPage]);var apiCall=function apiCall(){var data=axios.get(\"http://www.omdbapi.com/?s=\".concat(text,\"&apikey=8a7484af&page=\").concat(currentPage));return data;};var fetchmoviehandler=function fetchmoviehandler(event){event.preventDefault();setLoading(true);var data=apiCall();data.then(function(resp){console.log(resp.data.Search);setMovies(resp.data.Search);setLoading(false);}).catch(function(err){alert(err.message);});setText(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Movie Search App\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-inline\",onSubmit:fetchmoviehandler,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control mr-sm-2\",type:\"search\",placeholder:\"Enter Movie Name\",\"aria-label\":\"Search\",onChange:function onChange(event){setText(event.target.value);},value:text}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark \",children:\"Search\"})]}),!loading&&error&&/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[loading&&/*#__PURE__*/_jsx(\"span\",{style:{textAlign:\"center\"},children:\"Loading a content....\"}),!loading&&movies&&movies.length?movies.map(function(movie,i){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"col1\",children:[/*#__PURE__*/_jsx(Link,{to:\"/movie/\".concat(movie.imdbID),children:/*#__PURE__*/_jsx(\"img\",{src:movie.Poster===\"N/A\"?\"https://cdn.pixabay.com/photo/2017/09/04/09/37/cinema-strip-2713352_960_720.jpg\":movie.Poster,className:\"si\",alt:\"movie.Title\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:movie.Title}),/*#__PURE__*/_jsx(\"span\",{children:movie.Year})]})]})},i);}):/*#__PURE__*/_jsx(\"h5\",{style:{textAlign:\"centre\"},children:\"No movies found\"})]}),!loading&&hasMore&&/*#__PURE__*/_jsx(\"button\",{onClick:handleLoadMore,className:\"btn btn-primary\",children:\"Load More.......\"})]});};export default MovieList;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","MovieList","movies","setMovies","text","setText","loading","setLoading","error","setError","currentPage","setCurrentPage","hasMore","setHasMore","fetchMovies","get","response","prevMovies","data","Search","length","console","log","message","handleLoadMore","prevPage","apiCall","fetchmoviehandler","event","preventDefault","then","resp","catch","err","alert","target","value","textAlign","map","movie","i","imdbID","Poster","Title","Year"],"sources":["C:/Users/Satbeer/Desktop/Movie Search App/src/components/pages/MovieList.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./MovieList.css\";\r\nimport { Link } from \"react-router-dom\";\r\nconst MovieList = () => {\r\n  const [movies, setMovies] = useState([]);\r\n  const [text, setText] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  const fetchMovies = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.get(\r\n        `https://www.omdbapi.com/?s=star wars&page=${currentPage}&apikey=8a7484af`\r\n      );\r\n      setMovies((prevMovies) => [...prevMovies, ...response.data.Search]);\r\n      setHasMore(response.data.Search.length > 0);\r\n      console.log(response.data.Search)\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    setCurrentPage((prevPage) => prevPage + 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchMovies();\r\n  }, [currentPage]);\r\n\r\n  const apiCall = () => {\r\n    const data = axios.get(\r\n      `http://www.omdbapi.com/?s=${text}&apikey=8a7484af&page=${currentPage}`\r\n    );\r\n    return data;\r\n  };\r\n  const fetchmoviehandler = (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n    const data = apiCall();\r\n    data\r\n      .then((resp) => {\r\n        console.log(resp.data.Search);\r\n        setMovies(resp.data.Search);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        alert(err.message);\r\n      });\r\n    setText(\"\");\r\n  };\r\n  return (\r\n    <div className=\"app\">\r\n      <h5>Movie Search App</h5>\r\n      <form className=\"form-inline\" onSubmit={fetchmoviehandler}>\r\n        <input\r\n          className=\"form-control mr-sm-2\"\r\n          type=\"search\"\r\n          placeholder=\"Enter Movie Name\"\r\n          aria-label=\"Search\"\r\n          onChange={(event) => {\r\n            setText(event.target.value);\r\n          }}\r\n          value={text}\r\n        />\r\n        <button type=\"submit\" className=\"btn btn-dark \">\r\n          Search\r\n        </button>\r\n      </form>\r\n      {!loading && error && <p>{error}</p>}\r\n\r\n      <div className=\"col\">\r\n        {loading && (\r\n          <span style={{ textAlign: \"center\" }}>Loading a content....</span>\r\n        )}\r\n        {!loading && movies && movies.length ? (\r\n          movies.map((movie, i) => (\r\n            <div key={i}>\r\n              {\r\n                <div className=\"col1\">\r\n                  <Link to={`/movie/${movie.imdbID}`}>\r\n                  <img\r\n                    src={\r\n                      movie.Poster === \"N/A\"\r\n                        ? \"https://cdn.pixabay.com/photo/2017/09/04/09/37/cinema-strip-2713352_960_720.jpg\"\r\n                        : movie.Poster\r\n                    }\r\n                    className=\"si\"\r\n                    alt=\"movie.Title\"\r\n                  />\r\n                  </Link>\r\n                  <div>\r\n                    <h4>{movie.Title}</h4>\r\n                    <span>{movie.Year}</span>\r\n                  </div>\r\n                </div>\r\n              }\r\n            </div>\r\n          ))\r\n        )\r\n         :\r\n         (<h5 style={{ textAlign: \"centre\" }}>No movies found</h5>)\r\n        }\r\n      </div>\r\n\r\n      {!loading && hasMore && (\r\n        <button onClick={handleLoadMore} className=\"btn btn-primary\">\r\n          Load More.......\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MovieList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}